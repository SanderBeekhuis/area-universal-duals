%!TEX root = ../thesis.tex

\subsection{Flipping Blue $Z$'s}
\thispagestyle{plain}
\label{ss:flipBlueZ}

  The regular edge labeling provided by the sweepcycle algorithm of Section \ref{ss:sweep} is often vertically one-sided but we have not succeeded in proving that this is always the case.
  We prefer to obtain a vertically one-sided regular edge labeling since if we then recolor edges to subdivide large blue faces we cannot accidentally create many-sided vertical segments.
  In this section we modify the current regular edge labeling to make it vertically one-sided while maintaining the nice property of Lemma \ref{lm:sweep:NoTwoSplitsAboveEachOther}.


  A \emph{blue $Z$} is a path of three blue edges all in the same red face. A $Z$ has a \emph{midlle} edge, this is the second edge in this path.
  In the case that this regular edge labeling is not one-sided there must be a blue $Z$ as is proved in Lemma \ref{lm:zflip:blueZNorVertOneSided}.
  \begin{lemma}
    \label{lm:zflip:blueZNorVertOneSided}
    A regular edge labeling is not one sided if and only if it contains a blue $Z$
  \end{lemma}
  \begin{proof}
    Consider a regular edge labeling that is not one-sided, then it contains a red face of which both boundary paths are of length at least $3$. However since the interior faces of $G$ are triangles there must then be a blue $Z$ in this face.
    On the other hand, if a face contains a blue $Z$ it can not be one-sided.
  \end{proof}

  \begin{figure}[h]
    \centering
    \includegraphics[scale=1]{unifiedAlgo/img/zflip/blueZ.pdf}
    \caption{The two possible blue $Z$'s.}
    \label{fig:zflip:blueZ}
  \end{figure}

  As long as the regular edge labeling is not vertically one-sided we find such a blue $Z$ and recolor its middle edge as in Figure \ref{fig:zflip:flip}. We call this a \emph{flip} and we will say that this edge is \emph{flipped}.
  Note that both flips transfer a valid regular edge labeling to another valid regular edge labeling. If the interior vertex condition was fulfilled in Figure \ref{fig:zflip:blueZ} then it is also fulfilled in Figure \ref{fig:zflip:flip}.

   We repeat these flips until the regular edge labeling is vertically one-sided.
   Since every flip reduces the number of blue edges by one this is a finite procedure.

  \begin{figure}[h]
    \centering
    \includegraphics[scale=1]{unifiedAlgo/img/zflip/flip.pdf}
    \caption{The flip.}
    \label{fig:zflip:flip}
  \end{figure}

  \begin{lemma}
    \label{lm:sweep:vertOnsided}
    The result is a rectangular edge labeling and vertically one-sided
  \end{lemma}
  \begin{proof}
    By construction we flip all blue $Z$'s. If we do not have any more $Z$'s then the remaining regular edge labeling is vertically one-sided by Lemma \ref{lm:zflip:blueZNorVertOneSided}.
  \end{proof}

  \begin{lemma}
    \label{lm:zflip:NoTwoSplitsAboveEachOtherVertOnesided}
    Let $v$ be any splitvertex. Then the subsequent vertex on the bottom path $w$ can not be the handle of a large topfan.
  \end{lemma}

  \begin{proof}
    Note that this is the same statement as is provided in Lemma \ref{lm:sweep:NoTwoSplitsAboveEachOther}. We will show that the operation of flipping $Z$'s does not compromise the validity of this lemma.

    Not that the flips can only reduce the number of split vertices. Hence it suffices to show that the statement still holds for all previously existing split vertices.


    For a split vertex $v$ adjacent to $\pS$ we can note that the edge $vw$ will not be flipped because it can not be a middle edge. Hence $w$ is still on the bottom path and still not the handle of a big topfan.

    If $v$ is a split vertex due to a chord let us note the following.
    The edges of $\P$ and $ab$ in Figure \ref{fig:sweep:botomPathChord} can not have been flipped since then we would find a monochromatic red triangle while a flip leads to another valid regular edge labeling. Hence $w$ is still on the bottom path trough $v$ and still can not be the handle of a large topfan.
  \end{proof}
